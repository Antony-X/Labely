Base URL: http://[HOSTNAME]:[PORT]

GET /
Description: Returns the raw contents of docs.txt for verification of service availability.
Response: HTML-wrapped text from docs.txt.
Status: 200 OK

GET /dataset/list
Description: Lists all available datasets located in DATASET_ROOT. Only files ending in .json are considered valid datasets; their extensions are removed before returning.
Response: JSON array of dataset names.
Status: 200 OK

GET /dataset/get?name=[dataset_name]
Description: Returns the JSON indexation file for the specified dataset. The name must match a .json file inside DATASET_ROOT.
Query Parameters:
name – Dataset name without extension.
Responses:
200 OK: Full dataset JSON.
404 Not Found: {"error": "Dataset \"[name]\" not found."}

GET /dataset/getimg?name=[dataset_name]&id=[item_id]
Description: Returns an image associated with the given dataset item. The function validates dataset existence, item index bounds, and file availability.
Query Parameters:
name – Dataset name.
id – Zero-based item index.
Responses:
200 OK: Image file with JPEG mimetype.
400 Bad Request: {"error": "Invalid id"}
404 Not Found: {"error": "Dataset not found"} or {"error": "Image not found"}

POST /dataset/setcat
Description: Updates the category value for a dataset entry. The category label must exist in the dataset’s category mapping. Changes are written back to the dataset’s JSON file.
Request JSON:
{
    "name": "dataset_name",
    "id": integer,
    "label": "category_label"
}
Responses:
200 OK: {"status": "ok", "assigned": [category_value]}
400 Bad Request: {"error": "Unknown label"} or {"error": "Invalid id"}
404 Not Found: {"error": "Dataset not found"}

GET /textdataset/get?name=[dataset_name]
Description: Returns the JSON index for a text dataset. Generates an index from the CSV on first access if none exists.
Query Parameters:
name – Dataset folder name under ./datasets.
Responses:
200 OK: Full text dataset index JSON with `data` array containing `id`, `review`, and `label`.
404 Not Found: {"error": "Dataset not found"}

GET /textdataset/getitem?name=[dataset_name]&id=[item_id]
Description: Returns a single text item from the text dataset.
Query Parameters:
name – Dataset folder name.
id – Zero-based item index.
Responses:
200 OK: {"id": integer, "review": string, "label": string or null}
400 Bad Request: {"error": "Invalid id"}
404 Not Found: {"error": "Dataset not found"}

POST /textdataset/setlabel
Description: Updates the label of a text dataset entry. Changes are written back to the text dataset’s index JSON.
Request JSON:
{
    "name": "dataset_name",
    "id": integer,
    "label": "new_label"
}
Responses:
200 OK: {"status": "ok", "assigned": [new_label]}
400 Bad Request: {"error": "Invalid id"} or {"error": "Invalid label"}
404 Not Found: {"error": "Dataset not found"}

Notes: Dataset directories and .json files must be present under DATASET_ROOT.
Each dataset JSON must contain “categories” (label–value pairs) and “data” (entries with filename and category).
Text datasets are expected in ./datasets/[dataset_name]/IMBD_100_Samples.csv.
Text dataset index JSON is generated automatically on first access under the same folder.
Category assignment replaces the category field for image dataset items.
Label assignment replaces the label field for text dataset items.
Image requests load files from a subfolder named after the dataset.
Required environment variables include HOSTNAME, PORT, DEBUG, and DATASET_ROOT.

Sample responses:

/dataset/list
[
  "fruit-dataset",
  "muffin-vs-chihuahua",
  "multi-class-emotion-classification",
  "animals-or-else"
]

/dataset/get?name=muffin-vs-chihuahua
{
  "categories": [
    { "label": "muffin", "value": 0 },
    { "label": "chihuahua", "value": 1 }
  ],
  "data": [
    { "category": -1, "filename": "5.png",  "id": 0 },
    { "category": -1, "filename": "2.png",  "id": 1 },
    { "category": -1, "filename": "7.png",  "id": 2 },
    { "category": -1, "filename": "4.png",  "id": 3 },
    { "category": -1, "filename": "0.png",  "id": 4 },
    { "category": -1, "filename": "9.png",  "id": 5 },
    { "category": -1, "filename": "10.png", "id": 6 },
    { "category": -1, "filename": "1.png",  "id": 7 },
    { "category": -1, "filename": "8.png",  "id": 8 },
    { "category": -1, "filename": "6.png",  "id": 9 }
  ],
  "dataset_name": "muffin-vs-chihuahua"
}

/textdataset/get?name=imdb-movie-review
{
  "data": [
    {
      "id": 0,
      "review": "I don't know how or why this film has a meager rating on IMDb...",
      "label": "positive"
    },
    {
      "id": 1,
      "review": "For a long time it seemed like all the good Canadian actors had headed south...",
      "label": "positive"
    }
  ]
}

/textdataset/getitem?name=imdb-movie-review&id=0
{
  "id": 0,
  "review": "I don't know how or why this film has a meager rating on IMDb...",
  "label": "positive"
}

/textdataset/setlabel
Request JSON:
{
  "name": "imdb-movie-review",
  "id": 0,
  "label": "negative"
}
Response:
{
  "status": "ok",
  "assigned": "negative"
}
